#!/usr/bin/env python

import sys
from rasmus import util, treelib
from rasmus.bio import phylo

options = [
"""\
    Compares two trees
""",

    ["u", "unroot", "unroot", "",
     {"single": True,
      "help": "match unrooted topology"}],
]



conf = util.parseOptions(sys.argv, options, quit=True)

if len(conf["REST"]) != 2:
    print >>sys.stderr, "must give two trees"
    sys.exit(1)

tree1, tree2 = map(treelib.readTree, conf["REST"])

if conf["unroot"]:
    treelib.reroot(tree1, sorted(tree1.leafNames())[0], newCopy=False)
    treelib.reroot(tree2, sorted(tree1.leafNames())[0], newCopy=False)

hash1 = phylo.hashTree(tree1)
hash2 = phylo.hashTree(tree2)

print hash1 == hash2

if hash1 == hash2:
    sys.exit(0)
else:
    sys.exit(1)

