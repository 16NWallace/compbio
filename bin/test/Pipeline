
job("job1", "echo job1")
job("job2", "echo job2 && sleep 1")
job("job3", "echo job3", ["job1", "job2"])
job("job4", "cat nosuchthing", ["job3"])
job("job5", "echo job5", ["job4", "job3"])
    

jobs = []

for i in range(100):
    print i
    jobs.append(job("job-%d" % i, "echo job-%d; sleep %d" % (i, i % 5), ["job5"]))


job("stage1", "echo stage1", jobs)

jobs2 = []
for i in range(100,200):
    jobs2.append(job("job-%d" % i, "echo job-%d; sleep %d" % (i, i % 5), ["stage1"]))


job("last", "echo last; sleep 2", jobs2)


subs = []
for i in xrange(20):
    subs.append(job("sub%d"%i, "echo sub%d; sleep 1" % i))

groups("group", subs, 5)

job("all", "echo all", subs)
