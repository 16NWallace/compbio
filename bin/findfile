#!/usr/bin/env python

import sys

from rasmus import env


if len(sys.argv) < 2:
    print >>sys.stderr, "usage: findfile [-p <dir1>:<dir2>...] [-e <env var>] file1 file2 ..."
    sys.exit(1)

env.addEnvPaths("DATAPATH")

argc = len(sys.argv)
i = 1
while i < argc:
    if sys.argv[i] == "-e" and i + 1 < argc:
        # add paths from environment variable
        env.addEnvPaths(sys.argv[i+1])
        i += 1
        
    if sys.argv[i] == "-p" and i + 1 < argc:
        # add paths listed on command line
        env.addPaths(sys.argv[i+1])
        i += 1
        
    else:
        break
    i += 1

try:
    for filename in sys.argv[i:]:
        print env.findFile(filename)
except env.PathError, e:
    print >>sys.stderr, e
    sys.exit(1)
